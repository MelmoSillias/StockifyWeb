{% extends 'appbase.html.twig' %}

{% block title %}Mouvements de Stock{% endblock %}

{% block main %}
<div class="container-fluid px-4">
  <h3 class="mb-3 text-primary"><i class="bi bi-arrow-left-right me-1"></i> Mouvements de Stock</h3>

  <!-- Filtres -->
  <div class="card shadow mb-3">
    <div class="card-body">
      <form id="filtreForm" class="row g-3 align-items-end">
        <div class="col-md-3">
          <label for="filtre-date" class="form-label">Période</label>
          <input type="text" id="filtre-date" class="form-control" placeholder="Du ... au ..." />
        </div>
        <div class="col-md-3">
          <label for="filtre-produit" class="form-label">Produit</label>
          <input type="text" id="filtre-produit" class="form-control" placeholder="Nom ou ID produit" />
        </div>
        <div class="col-md-3">
          <label for="filtre-type" class="form-label">Type</label>
          <select id="filtre-type" class="form-select">
            <option value="">Tous</option>
            <option value="entrée">Entrée</option>
            <option value="sortie">Sortie</option>
          </select>
        </div>
        <div class="col-md-3 d-grid">
          <button type="submit" class="btn btn-primary"><i class="bi bi-search me-1"></i> Filtrer</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Statistiques -->
  <div class="row mb-3" id="mouvementsStats">
    <div class="col-md-4">
      <div class="card bg-info text-white shadow">
        <div class="card-body text-center">
          <h5>Total Mouvements</h5>
          <h2 id="stat-total">--</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card bg-success text-white shadow">
        <div class="card-body text-center">
          <h5>Total Entrées</h5>
          <h2 id="stat-entrees">--</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card bg-danger text-white shadow">
        <div class="card-body text-center">
          <h5>Total Sorties</h5>
          <h2 id="stat-sorties">--</h2>
        </div>
      </div>
    </div>
  </div>

  <!-- Tableau -->
  <div class="card shadow">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h6 class="mb-0"><i class="bi bi-table me-1"></i>Liste des mouvements</h6>
      <button id="btn-print-mouvements" class="btn btn-outline-secondary btn-sm">
        <i class="bi bi-printer me-1"></i> Imprimer
      </button>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table id="mouvementsTable" class="table table-bordered table-striped table-hover w-100">
          <thead>
            <tr>
              <th>ID</th>
              <th>Date</th>
              <th>Produit</th>
              <th>Type</th>
              <th>Quantité</th>
              <th>Source</th>
              <th>Commentaire</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>
</div>
 
{% endblock %}

{% block javascripts %} 
  <script src="{{ asset('assets/appjs/mouvement.js') }}"></script>
{% endblock %}
